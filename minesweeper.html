// https://therealmofcode.com/posts/2012/11/building-minesweeper-game-using-javascript-html-css.html
<!doctype html>
<html>
	<head>
        <title>Minesweeper</title> 
    </head>
    
    <body>
        <div id="game" class="minesweeper">
            <div>
                <h2>
                    <span>Clock time:</span>
                    <span class="timer">0</span>
                </h2>
            </div>
        <div>

        <span>Difficulty</span>
            <select class="level">
                <option value="beginner">Easy</option>
                <option value="intermediate">Medium</option>
                <option value="advanced">Hard</option>
            </select>
        <button class="newGame" type="button">New Game</button>
        </div>
            <div class="board"></div>
        </div>

        var size = 20;
        var minePercent = 18 / 100;
        var board = [];

        //build the board
- for(var y = 0; y < size; y++){
- 	board.push(Array(size).fill(0));
- 	for(var x = 0; x < size; x++){
- 		board[y][x] = {mines: 0, groups: [], isMine: false, x: x, y: y}
- 	}
- }
-
- //add the mines
- for(var mine = 0; mine < size * size * minePercent; mine++){
- 	var cell = board[Math.floor(Math.random()*size)][Math.floor(Math.random()*size)]
- 
- 	// make sure the cell is not a mine
- 	if(!cell.isMine){
- 		cell.isMine = true;
- 		
- 		for(var y = -1; y <= 1; y++){
- 			if(cell.y + y < size && cell.y + y >= 0){
- 				for(var x = -1; x <= 1; x++){
- 					//make sure its not outside of the board
- 					if(cell.x + x < size && cell.x + x >= 0){
- 						board[cell.y + y][cell.x + x].mines++;
- 					}
- 				}
- 			}
- 		}
- 	}
- }
-
- // find the groups
- function spreadGroup(cell, group){
- 	if(cell.groups.indexOf(group) == -1)
- 		cell.groups.push(group);
- 
- 	if(cell.mines == 0){
- 		// if the cell dose not have any mines spread to its neighbors
- 		for(var y = -1; y <= 1; y++){
- 			for(var x = -1; x <= 1; x++){
- 				//make sure its not outside of the board
- 				if(cell.x + x < size && cell.x + x >= 0 && cell.y + y < size && cell.y + y >= 0){
- 					// make sure the neighbor cell dose not have the group
- 					if(board[cell.y + y][cell.x + x].groups.indexOf(group) == -1)
- 						spreadGroup(board[cell.y + y][cell.x + x], group)
- 				}
- 			}
- 		}
- 	}
- }
- 
- var groups = 0;
- for(var y = 0; y < size; y++){
- 	for(var x = 0; x < size; x++){
- 		var cell = board[y][x]
- 		if(cell.mines == 0 && cell.groups.length == 0 && cell.isMine == false){
- 			spreadGroup(cell, 'group-'+(groups++))
- 		}
- 	}
- }

.center
	h2
		| Pure CSS & HTML Minespeeper

	form.wrapper
		.header
			button.btn.reset(type="submit") Reset
			//- label.btn.toggle-flag(for="place-flag")

		.board(style={
			'width': size*24+'px',
			'height': size*24+'px'
		})
			input#dead.group(type="checkbox")
			input#place-flag.group(type="checkbox")

			- for(var i = 0; i < groups; i++)
				input.group(type="checkbox" id=`group-${i}`)

			- for(var y = 0; y < size; y++)
				br
				- for(var x = 0; x < size; x++)
					if board[y][x].isMine
						label.cell.mine(
							for="dead"
							groups=board[y][x].groups.join(' ')
						)
					else if(board[y][x].mines > 0)
						input(
							type="checkbox"
							class=`cell mines-${board[y][x].mines}`
							groups=board[y][x].groups.join(' ')
						)
					else if(board[y][x].mines == 0/* && board[y][x].groups.length == 1*/)
						label.cell.mines-0(
							for=board[y][x].groups[0]
							groups=board[y][x].groups.join(' ')
						)
	h4
		| created by 
		a(href="http://rdfriedl.com" target="_blank") rdfriedl

    </body>
</html>